<netconf-client
  xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-client"
  xmlns:ct="urn:ietf:params:xml:ns:yang:ietf-crypto-types">

  <!-- NETCONF servers to initiate connections to -->
  <initiate>
    <netconf-server>
      <name>corp-fw1</name>
      <endpoints>
        <endpoint>
          <name>corp-fw1.example.com</name>
          <ssh>
            <tcp-client-parameters>
              <remote-address>corp-fw1.example.com</remote-address>
              <keepalives>
                <idle-time>15</idle-time>
                <max-probes>3</max-probes>
                <probe-interval>30</probe-interval>
              </keepalives>
            </tcp-client-parameters>
            <ssh-client-parameters>
              <client-identity>
                <username>foobar</username>
                <public-key>
                  <local-definition>
                    <public-key-format>ct:ssh-public-key-format</public-key-format>
                    <public-key>base64encodedvalue==</public-key>
                    <private-key-format>ct:rsa-private-key-format</private-key-format>
                    <private-key>base64encodedvalue==</private-key>
                  </local-definition>
                </public-key>
              </client-identity>
              <server-authentication>
                <ca-certs>
                  <truststore-reference>trusted-server-ca-certs</truststore-reference>
                </ca-certs>
                <ee-certs>
                  <truststore-reference>trusted-server-ee-certs</truststore-reference>
                </ee-certs>
              </server-authentication>
              <keepalives>
                <max-wait>30</max-wait>
                <max-attempts>3</max-attempts>
              </keepalives>
            </ssh-client-parameters>
            <netconf-client-parameters>
              <!-- nothing to configure -->
            </netconf-client-parameters>
          </ssh>
        </endpoint>
        <endpoint>
          <name>corp-fw2.example.com</name>
          <tls>
            <tcp-client-parameters>
              <remote-address>corp-fw2.example.com</remote-address>
              <keepalives>
                <idle-time>15</idle-time>
                <max-probes>3</max-probes>
                <probe-interval>30</probe-interval>
              </keepalives>
            </tcp-client-parameters>
            <tls-client-parameters>
              <client-identity>
                <certificate>
                  <local-definition>
                    <public-key-format>ct:subject-public-key-info-format</public-key-format>
                    <public-key>base64encodedvalue==</public-key>
                    <private-key-format>ct:rsa-private-key-format</private-key-format>
                    <private-key>base64encodedvalue==</private-key>
                    <cert>base64encodedvalue==</cert>
                  </local-definition>
                </certificate>
              </client-identity>
              <server-authentication>
                <ca-certs>
                  <truststore-reference>trusted-server-ca-certs</truststore-reference>
                </ca-certs>
                <ee-certs>
                  <truststore-reference>trusted-server-ee-certs</truststore-reference>
                </ee-certs>
              </server-authentication>
              <keepalives>
                <test-peer-aliveness>
                  <max-wait>30</max-wait>
                  <max-attempts>3</max-attempts>
                </test-peer-aliveness>
              </keepalives>
            </tls-client-parameters>
            <netconf-client-parameters>
              <!-- nothing to configure -->
            </netconf-client-parameters>
          </tls>
        </endpoint>
      </endpoints>
      <connection-type>
        <persistent/>
      </connection-type>
      <reconnect-strategy>
        <start-with>last-connected</start-with>
      </reconnect-strategy>
    </netconf-server>
  </initiate>

  <!-- endpoints to listen for NETCONF Call Home connections on -->
  <listen>
    <endpoint>
      <name>Intranet-facing SSH listener</name>
      <ssh>
        <tcp-server-parameters>
          <local-address>192.0.2.7</local-address>
        </tcp-server-parameters>
        <ssh-client-parameters>
          <client-identity>
            <username>foobar</username>
            <public-key>
              <local-definition>
                <public-key-format>ct:ssh-public-key-format</public-key-format>
                <public-key>base64encodedvalue==</public-key>
                <private-key-format>ct:rsa-private-key-format</private-key-format>
                <private-key>base64encodedvalue==</private-key>
              </local-definition>
            </public-key>
          </client-identity>
          <server-authentication>
            <ca-certs>
              <truststore-reference>trusted-server-ca-certs</truststore-reference>
            </ca-certs>
            <ee-certs>
              <truststore-reference>trusted-server-ee-certs</truststore-reference>
            </ee-certs>
            <ssh-host-keys>
              <truststore-reference>trusted-ssh-public-keys</truststore-reference>
            </ssh-host-keys>
          </server-authentication>
        </ssh-client-parameters>
        <netconf-client-parameters>
          <!-- nothing to configure -->
        </netconf-client-parameters>
      </ssh>
    </endpoint>
    <endpoint>
      <name>Intranet-facing TLS listener</name>
      <tls>
        <tcp-server-parameters>
          <local-address>192.0.2.7</local-address>
        </tcp-server-parameters>
        <tls-client-parameters>
          <client-identity>
            <certificate>
              <local-definition>
                <public-key-format>ct:subject-public-key-info-format</public-key-format>
                <public-key>base64encodedvalue==</public-key>
                <private-key-format>ct:rsa-private-key-format</private-key-format>
                <private-key>base64encodedvalue==</private-key>
                <cert>base64encodedvalue==</cert>
              </local-definition>
            </certificate>
          </client-identity>
          <server-authentication>
            <ca-certs>
              <truststore-reference>trusted-server-ca-certs</truststore-reference>
            </ca-certs>
            <ee-certs>
              <truststore-reference>trusted-server-ee-certs</truststore-reference>
            </ee-certs>
          </server-authentication>
          <keepalives>
            <peer-allowed-to-send/>
          </keepalives>
        </tls-client-parameters>
        <netconf-client-parameters>
          <!-- nothing to configure -->
        </netconf-client-parameters>
      </tls>
    </endpoint>
  </listen>
</netconf-client>
