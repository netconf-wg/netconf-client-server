<netconf-server
  xmlns="urn:ietf:params:xml:ns:yang:ietf-netconf-server"
  xmlns:x509c2n="urn:ietf:params:xml:ns:yang:ietf-x509-cert-to-name">

  <!-- listening for SSH and TLS connections -->
  <listen>
    <endpoint> <!-- listening for SSH connections -->
      <name>netconf/ssh</name>
      <ssh>
        <address>192.0.2.7</address>
        <server-identity>
          <host-key>
            <name>deployment-specific-certificate</name>
            <public-key>
              <algorithm xmlns:ks="urn:ietf:params:xml:ns:yang:ietf-keystore">ks:secp521r1</algorithm>
              <private-key>base64encodedvalue==</private-key>
              <public-key>base64encodedvalue==</public-key>
            </public-key>
          </host-key>
        </server-identity>
        <client-cert-auth>
          <pinned-ca-certs>deployment-specific-ca-certs</pinned-ca-certs>
          <pinned-client-certs>explicitly-trusted-client-certs</pinned-client-certs>
        </client-cert-auth>
      </ssh>
    </endpoint>
    <endpoint> <!-- listening for TLS sessions -->
      <name>netconf/tls</name>
      <tls>
        <address>192.0.2.7</address>
        <server-identity>
          <algorithm xmlns:ks="urn:ietf:params:xml:ns:yang:ietf-keystore">ks:secp521r1</algorithm>
          <private-key>base64encodedvalue==</private-key>
          <public-key>base64encodedvalue==</public-key>
          <certificates>
            <certificate>
              <name>domain certificate</name>
              <value>base64encodedvalue==</value>
            </certificate>
          </certificates>
        </server-identity>
        <client-auth>
          <pinned-ca-certs>deployment-specific-ca-certs</pinned-ca-certs>
          <pinned-client-certs>explicitly-trusted-client-certs</pinned-client-certs>
          <cert-maps>
            <cert-to-name>
              <id>1</id>
              <fingerprint>11:0A:05:11:00</fingerprint>
              <map-type>x509c2n:san-any</map-type>
            </cert-to-name>
            <cert-to-name>
              <id>2</id>
              <fingerprint>B3:4F:A1:8C:54</fingerprint>
              <map-type>x509c2n:specified</map-type>
              <name>scooby-doo</name>
            </cert-to-name>
          </cert-maps>
        </client-auth>
      </tls>
    </endpoint>
  </listen>

  <!-- calling home to an SSH and TLS based NETCONF clients -->
  <call-home>
    <netconf-client> <!-- SSH-based client -->
      <name>config-mgr</name>
      <endpoints>
        <endpoint>
          <name>east-data-center</name>
          <ssh>
            <address>east.config-mgr.example.com</address>
            <server-identity>
              <host-key>
                <name>deployment-specific-certificate</name>
                <public-key>
                  <algorithm xmlns:ks="urn:ietf:params:xml:ns:yang:ietf-keystore">ks:secp521r1</algorithm>
                  <private-key>base64encodedvalue==</private-key>
                  <public-key>base64encodedvalue==</public-key>
                </public-key>
              </host-key>
            </server-identity>
            <client-cert-auth>
              <pinned-ca-certs>deployment-specific-ca-certs</pinned-ca-certs>
              <pinned-client-certs>explicitly-trusted-client-certs</pinned-client-certs>
            </client-cert-auth>
          </ssh>
        </endpoint>
        <endpoint>
          <name>west-data-center</name>
          <ssh>
            <address>west.config-mgr.example.com</address>
            <server-identity>
              <host-key>
                <name>deployment-specific-certificate</name>
                <public-key>
                  <algorithm xmlns:ks="urn:ietf:params:xml:ns:yang:ietf-keystore">ks:secp521r1</algorithm>
                  <private-key>base64encodedvalue==</private-key>
                  <public-key>base64encodedvalue==</public-key>
                </public-key>
              </host-key>
            </server-identity>

            <client-cert-auth>
              <pinned-ca-certs>deployment-specific-ca-certs</pinned-ca-certs>
              <pinned-client-certs>explicitly-trusted-client-certs</pinned-client-certs>
            </client-cert-auth>
          </ssh>
        </endpoint>
      </endpoints>
      <connection-type>
        <periodic>
          <idle-timeout>300</idle-timeout>
          <reconnect-timeout>60</reconnect-timeout>
        </periodic>
      </connection-type>
      <reconnect-strategy>
        <start-with>last-connected</start-with>
        <max-attempts>3</max-attempts>
      </reconnect-strategy>
    </netconf-client>
    <netconf-client> <!-- TLS-based client -->
      <name>data-collector</name>
      <endpoints>
        <endpoint>
          <name>east-data-center</name>
          <tls>
            <address>east.analytics.example.com</address>
            <server-identity>
              <algorithm xmlns:ks="urn:ietf:params:xml:ns:yang:ietf-keystore">ks:secp521r1</algorithm>
              <private-key>base64encodedvalue==</private-key>
              <public-key>base64encodedvalue==</public-key>
              <certificates>
                <certificate>
                  <name>domain certificate</name>
                  <value>base64encodedvalue==</value>
                </certificate>
              </certificates>
            </server-identity>
            <client-auth>
              <pinned-ca-certs>deployment-specific-ca-certs</pinned-ca-certs>
              <pinned-client-certs>explicitly-trusted-client-certs</pinned-client-certs>
              <cert-maps>
                <cert-to-name>
                  <id>1</id>
                  <fingerprint>11:0A:05:11:00</fingerprint>
                  <map-type>x509c2n:san-any</map-type>
                </cert-to-name>
                <cert-to-name>
                  <id>2</id>
                  <fingerprint>B3:4F:A1:8C:54</fingerprint>
                  <map-type>x509c2n:specified</map-type>
                  <name>scooby-doo</name>
                </cert-to-name>
              </cert-maps>
            </client-auth>
          </tls>
        </endpoint>
        <endpoint>
          <name>west-data-center</name>
          <tls>
            <address>west.analytics.example.com</address>
            <server-identity>
              <algorithm xmlns:ks="urn:ietf:params:xml:ns:yang:ietf-keystore">ks:secp521r1</algorithm>
              <private-key>base64encodedvalue==</private-key>
              <public-key>base64encodedvalue==</public-key>
              <certificates>
                <certificate>
                  <name>domain certificate</name>
                  <value>base64encodedvalue==</value>
                </certificate>
              </certificates>
            </server-identity>
            <client-auth>
              <pinned-ca-certs>deployment-specific-ca-certs</pinned-ca-certs>
              <pinned-client-certs>explicitly-trusted-client-certs</pinned-client-certs>
              <cert-maps>
                <cert-to-name>
                  <id>1</id>
                  <fingerprint>11:0A:05:11:00</fingerprint>
                  <map-type>x509c2n:san-any</map-type>
                </cert-to-name>
                <cert-to-name>
                  <id>2</id>
                  <fingerprint>B3:4F:A1:8C:54</fingerprint>
                  <map-type>x509c2n:specified</map-type>
                  <name>scooby-doo</name>
                </cert-to-name>
              </cert-maps>
            </client-auth>
          </tls>
        </endpoint>
      </endpoints>
      <connection-type>
        <persistent>
          <idle-timeout>300</idle-timeout>
          <keep-alives>
            <max-wait>30</max-wait>
            <max-attempts>3</max-attempts>
          </keep-alives>
        </persistent>
      </connection-type>
      <reconnect-strategy>
        <start-with>first-listed</start-with>
        <max-attempts>3</max-attempts>
      </reconnect-strategy>
    </netconf-client>
  </call-home>
</netconf-server>
